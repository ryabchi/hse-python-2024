from typing import Iterable
import random
import re

UNCULTURED_WORDS = ('kotleta', 'pirog')


def greet_user(name: str) -> str:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—É—é —Ñ—Ä–∞–∑—É.
    –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–µ –º–æ–∂–µ—Ç —Å–æ—Å—Ç–æ—è—Ç—å —Ç–æ–ª—å–∫–æ –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

    :param name: –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    :return: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
    """

    # –ø–∏—à–∏ –∫–æ–¥ –∑–¥–µ—Å—å
    greeting = f"–ü—Ä–∏–≤–µ—Ç, {name}üëã"
    return greeting


def get_amount() -> float:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—É—é —Å—É–º–º—É –Ω–∞ —Å—á–µ—Ç–µ.

    –°—É–º–º–∞:
    - –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç 100 –¥–æ 1000000
    - float
    - –Ω–µ –±–æ–ª—å—à–µ 2-—Ö –∑–Ω–∞–∫–æ–≤ –ø–æ—Å–ª–µ –∑–∞–ø—è—Ç–æ–π

    :return: —Å–ª—É—á–∞–π–Ω—É—é —Å—É–º–º—É –Ω–∞ —Å—á–µ—Ç–µ
    """

    # –ø–∏—à–∏ –∫–æ–¥ –∑–¥–µ—Å—å
    #                         –º–æ–∂–Ω–æ –±—ã–ª–æ –æ—Å—Ç–∞–≤–∏—Ç—å –¥–≤–∞ –∑–Ω–∞–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–ª–∏ —á–µ—Ä–µ–∑ round
    amount = random.randint(100_00, 1000000_00) / 100
    return amount


def is_phone_correct(phone_number: str) -> bool:
    """
    –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ª–µ–¥—É—é—â–µ–º—É —Ñ–æ—Ä–º–∞—Ç—É:
    +7xxxxxxxxxx, –≥–¥–µ x - —Ü–∏—Ñ—Ä–∞ –æ—Ç 0 –¥–æ 9

    :param phone_number: –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    :return: –±—É–ª–µ–Ω–æ–≤—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - bool: True - –µ—Å–ª–∏ –Ω–æ–º–µ—Ä –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã,
                                          False - –µ—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
    """

    # –ø–∏—à–∏ –∫–æ–¥ –∑–¥–µ—Å—å
    result = len(phone_number) == 12 and re.match(r"\+7\d{10}", phone_number) is not None
    return result


def is_amount_correct(current_amount: float, transfer_amount: str) -> bool:
    """
    –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞.
    –ü–µ—Ä–µ–≤–æ–¥ –≤–æ–∑–º–æ–∂–µ–Ω –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ª–æ–≤–∏–µ:
    - —Ç–µ–∫—É—â–∏–π —Å—á–µ—Ç (current_amount) –±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–µ–Ω —Å—É–º–º–µ –ø–µ—Ä–µ–≤–æ–¥–∞ (transfer_amount)

    :param current_amount: —Ç–µ–∫—É—â–∏–π —Å—á–µ—Ç
    :param transfer_amount: —Å—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞
    :return: –±—É–ª–µ–Ω–æ–≤—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ - bool: True - –µ—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥ –≤–æ–∑–º–æ–∂–µ–Ω,
                                          False - –µ—Å–ª–∏ –¥–µ–Ω–µ–≥ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ
    """

    # –ø–∏—à–∏ –∫–æ–¥ –∑–¥–µ—Å—å
    result = current_amount >= float(transfer_amount)
    return result


def moderate_text(text: str, uncultured_words: Iterable[str]) -> str:
    """
    –ú–æ–¥–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ —Å–ª–µ–¥—É—é—â–∏–º –ø—Ä–∞–≤–∏–ª–∞–º.

    –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–µ–∫—Å—Ç—É:
    - –ü–µ—Ä–≤–∞—è –±—É–∫–≤–∞ –∑–∞–≥–ª–∞–≤–Ω–∞—è, –æ—Å—Ç–∞–ª—å–Ω—ã–µ –±—É–∫–≤—ã —Ç–æ–ª—å–∫–æ –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
    - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã
    - —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è '–æ–ø–∞—Å–Ω—ã–µ' —Å–∏–º–≤–æ–ª—ã: " ' (–¥–≤–æ–π–Ω—ã–µ –∏ –æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏)
    - —Å–ª–æ–≤–∞, –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π uncultured_words –∑–∞–º–µ–Ω—è—é—Ç—Å—è –Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–Ω–∞–∫–æ–≤ #

    :param text: –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç
    :param uncultured_words: —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö —Å–ª–æ–≤
    :return: —Ç–µ–∫—Å—Ç, —Å–æ–æ—Ç–≤–µ—Ç—Å–≤—É—é—â–∏–π –ø—Ä–∞–≤–∏–ª–∞–º
    """

    # –ø–∏—à–∏ –∫–æ–¥ –∑–¥–µ—Å—å
    uncultured_mapping = {word: '#' * len(word) for word in uncultured_words}
    # drop dangerous symbols
    words = (' ' + text).replace('"', '').replace("'", '')
    # filter uncultured_words
    for un_word in uncultured_words:
        words = words.replace(' ' + un_word, ' ' + uncultured_mapping[un_word])
    #
    result = ' '.join(words.strip().capitalize().split())
    return result


def create_request_for_loan(user_info: str) -> str:
    """
    –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞—è–≤–∫—É –Ω–∞ –∫—Ä–µ–¥–∏—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ö–æ–¥—è—â–µ–π —Å—Ç—Ä–æ–∫–∏.
    –§–æ—Ä–º–∞—Ç –≤—Ö–æ–¥—è—â–∏–π —Å—Ç—Ä–æ–∫–∏:

    –ò–≤–∞–Ω–æ–≤,–ü–µ—Ç—Ä,–°–µ—Ä–≥–µ–µ–≤–∏—á,01.01.1991,10000

    –ß—Ç–æ –¥–æ–ª–∂–Ω—ã –≤–µ—Ä–Ω—É—Ç—å –Ω–∞ –µ–µ –æ—Å–Ω–æ–≤–µ:

    –§–∞–º–∏–ª–∏—è: –ò–≤–∞–Ω–æ–≤
    –ò–º—è: –ü–µ—Ç—Ä
    –û—Ç—á–µ—Å—Ç–≤–æ: –°–µ—Ä–≥–µ–µ–≤–∏—á
    –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: 01.01.1991
    –ó–∞–ø—Ä–æ—à–µ–Ω–Ω–∞—è —Å—É–º–º–∞: 10000

    :param user_info: —Å—Ç—Ä–æ–∫–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–ª–∏–µ–Ω—Ç–µ
    :return: —Ç–µ–∫—Å—Ç –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∑–∞—è–≤–∫–∏
    """

    # –ø–∏—à–∏ –∫–æ–¥ –∑–¥–µ—Å—å
    last_name, first_name, middle_name, date_of_birth, amount = user_info.split(',')
    result = (f"–§–∞–º–∏–ª–∏—è: {last_name}\n"
              f"–ò–º—è: {first_name}\n"
              f"–û—Ç—á–µ—Å—Ç–≤–æ: {middle_name}\n"
              f"–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è: {date_of_birth}\n"
              f"–ó–∞–ø—Ä–æ—à–µ–Ω–Ω–∞—è —Å—É–º–º–∞: {amount}")
    return result